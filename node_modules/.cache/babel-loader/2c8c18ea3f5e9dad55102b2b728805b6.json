{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport { Grid, Step, Button, Checkbox, Form, Header, Icon, Image, Menu, Segment, Sidebar, TextArea, Container, Card } from 'semantic-ui-react';\nimport Layout from '../../components/Layout';\nimport web3 from '../../Ethereum/web3';\nimport Election from '../../Ethereum/election';\nimport Cookies from 'js-cookie';\nimport { Router } from '../../routes';\n\nvar VotingList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(VotingList, _Component);\n\n  function VotingList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, VotingList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(VotingList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      electiondet: '',\n      election_name: '',\n      election_desc: '',\n      numCand: ''\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"GridExampleGrid\", function () {\n      return React.createElement(Grid, null, columns);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"SidebarExampleVisible\", function () {\n      return React.createElement(Sidebar.Pushable, null, React.createElement(Sidebar, {\n        as: Menu,\n        animation: \"overlay\",\n        icon: \"labeled\",\n        inverted: true,\n        vertical: true,\n        visible: true,\n        width: \"thin\",\n        style: {\n          backgroundColor: 'white',\n          borderWidth: \"10px\"\n        }\n      }, React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(\"h2\", null, \"MENU\"), React.createElement(\"hr\", null)), React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"dashboard\"\n      }), \"Dashboard\"), React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"user outline\"\n      }), \"Candidate List\"), React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"list\"\n      }), \"Voter List\"), React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"sign out\"\n      }), \"Sign Out\")));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getElectionDetails\", function () {\n      var _this$state = _this.state,\n          election_name = _this$state.election_name,\n          election_desc = _this$state.election_desc;\n      return React.createElement(\"div\", {\n        style: {\n          marginLeft: '45%',\n          marginBottom: '2%',\n          marginTop: '2%'\n        }\n      }, React.createElement(Header, {\n        as: \"h2\"\n      }, React.createElement(Icon, {\n        name: \"address card\"\n      }), React.createElement(Header.Content, null, election_name, React.createElement(Header.Subheader, null, election_desc))));\n    });\n\n    return _this;\n  }\n\n  _createClass(VotingList, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var add, election, summary, c, candidates, i;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                add = Cookies.get('address');\n                election = Election(add);\n                _context.next = 5;\n                return election.methods.getElectionDetails().call();\n\n              case 5:\n                summary = _context.sent;\n                _context.next = 8;\n                return election.methods.getNumOfCandidates().call();\n\n              case 8:\n                c = _context.sent.toString(1);\n                this.setState({\n                  electiondet: election,\n                  election_name: summary[0],\n                  election_desc: summary[1],\n                  numCand: c\n                });\n                candidates = [];\n                i = 0;\n\n              case 12:\n                if (!(i < c)) {\n                  _context.next = 21;\n                  break;\n                }\n\n                _context.t0 = candidates;\n                _context.next = 16;\n                return election.methods.getCandidate(0).call();\n\n              case 16:\n                _context.t1 = _context.sent;\n\n                _context.t0.push.call(_context.t0, _context.t1);\n\n              case 18:\n                i++;\n                _context.next = 12;\n                break;\n\n              case 21:\n                console.log(candidates);\n                this.getElectionDetails();\n                _context.next = 30;\n                break;\n\n              case 25:\n                _context.prev = 25;\n                _context.t2 = _context[\"catch\"](0);\n                console.log(_context.t2.message);\n                alert(\"Redirecting you to login page!\");\n                Router.pushRoute('/voter_login');\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 25]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, React.createElement(Grid, null, React.createElement(Grid.Row, null, React.createElement(Grid.Column, {\n        width: 2\n      }, this.SidebarExampleVisible()), React.createElement(Layout, null, this.getElectionDetails(), React.createElement(Grid.Column, {\n        style: {\n          minHeight: '77vh'\n        }\n      })))));\n    }\n  }]);\n\n  return VotingList;\n}(Component);\n\nexport default VotingList;","map":{"version":3,"sources":["D:\\Blockchain\\BlockChainVoting\\pages\\election\\vote.js"],"names":["React","Component","Grid","Step","Button","Checkbox","Form","Header","Icon","Image","Menu","Segment","Sidebar","TextArea","Container","Card","Layout","web3","Election","Cookies","Router","VotingList","electiondet","election_name","election_desc","numCand","columns","backgroundColor","borderWidth","color","state","marginLeft","marginBottom","marginTop","add","get","election","methods","getElectionDetails","call","summary","getNumOfCandidates","c","toString","setState","candidates","i","getCandidate","push","console","log","message","alert","pushRoute","SidebarExampleVisible","minHeight"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,IAAf,EAAqBC,MAArB,EAA6BC,QAA7B,EAAuCC,IAAvC,EAA6CC,MAA7C,EAAqDC,IAArD,EAA2DC,KAA3D,EAAkEC,IAAlE,EAAwEC,OAAxE,EAAiFC,OAAjF,EAAyFC,QAAzF,EAAmGC,SAAnG,EAA8GC,IAA9G,QAA0H,mBAA1H;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAAQC,MAAR,QAAqB,cAArB;;IACMC,U;;;;;;;;;;;;;;;;;;4DAEM;AACJC,MAAAA,WAAW,EAAE,EADT;AAEJC,MAAAA,aAAa,EAAE,EAFX;AAGJC,MAAAA,aAAa,EAAE,EAHX;AAIJC,MAAAA,OAAO,EAAE;AAJL,K;;sEAMU;AAAA,aAAM,oBAAC,IAAD,QAAOC,OAAP,CAAN;AAAA,K;;4EACM;AAAA,aAEtB,oBAAC,OAAD,CAAS,QAAT,QACE,oBAAC,OAAD;AAAS,QAAA,EAAE,EAAEhB,IAAb;AAAmB,QAAA,SAAS,EAAC,SAA7B;AAAuC,QAAA,IAAI,EAAC,SAA5C;AAAsD,QAAA,QAAQ,MAA9D;AAA+D,QAAA,QAAQ,MAAvE;AAAwE,QAAA,OAAO,MAA/E;AAAgF,QAAA,KAAK,EAAC,MAAtF;AAA6F,QAAA,KAAK,EAAE;AAAEiB,UAAAA,eAAe,EAAE,OAAnB;AAA4BC,UAAAA,WAAW,EAAE;AAAzC;AAApG,SACA,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,EAAE,EAAC,GAAd;AAAkB,QAAA,KAAK,EAAE;AAAEC,UAAAA,KAAK,EAAE;AAAT;AAAzB,SACA,uCADA,EACa,+BADb,CADA,EAIE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,EAAE,EAAC,GAAd;AAAkB,QAAA,KAAK,EAAE;AAAEA,UAAAA,KAAK,EAAE;AAAT;AAAzB,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC;AAAX,QADF,cAJF,EAQE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,EAAE,EAAC,GAAd;AAAkB,QAAA,KAAK,EAAE;AAAEA,UAAAA,KAAK,EAAE;AAAT;AAAzB,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC;AAAX,QADF,mBARF,EAYE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,EAAE,EAAC,GAAd;AAAkB,QAAA,KAAK,EAAE;AAAEA,UAAAA,KAAK,EAAE;AAAT;AAAzB,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC;AAAX,QADF,eAZF,EAgBE,oBAAC,IAAD,CAAM,IAAN;AAAW,QAAA,EAAE,EAAC,GAAd;AAAkB,QAAA,KAAK,EAAE;AAAEA,UAAAA,KAAK,EAAE;AAAT;AAAzB,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC;AAAX,QADF,aAhBF,CADF,CAFsB;AAAA,K;;yEAoDD,YAAM;AAAA,wBAIrB,MAAKC,KAJgB;AAAA,UAErBP,aAFqB,eAErBA,aAFqB;AAAA,UAGrBC,aAHqB,eAGrBA,aAHqB;AAMzB,aACE;AAAK,QAAA,KAAK,EAAE;AAACO,UAAAA,UAAU,EAAE,KAAb;AAAmBC,UAAAA,YAAY,EAAE,IAAjC;AAAsCC,UAAAA,SAAS,EAAE;AAAjD;AAAZ,SACE,oBAAC,MAAD;AAAQ,QAAA,EAAE,EAAC;AAAX,SACE,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAC;AAAX,QADF,EAEE,oBAAC,MAAD,CAAQ,OAAR,QACGV,aADH,EAEE,oBAAC,MAAD,CAAQ,SAAR,QAAmBC,aAAnB,CAFF,CAFF,CADF,CADF;AAWD,K;;;;;;;;;;;;;;;;;AAxCWU,gBAAAA,G,GAAMf,OAAO,CAACgB,GAAR,CAAY,SAAZ,C;AACNC,gBAAAA,Q,GAAWlB,QAAQ,CAACgB,GAAD,C;;uBACHE,QAAQ,CAACC,OAAT,CAAiBC,kBAAjB,GAAsCC,IAAtC,E;;;AAAhBC,gBAAAA,O;;uBACWJ,QAAQ,CAACC,OAAT,CAAiBI,kBAAjB,GAAsCF,IAAtC,E;;;AAAXG,gBAAAA,C,iBAAyDC,Q,CAAS,C;AACxE,qBAAKC,QAAL,CAAc;AACVtB,kBAAAA,WAAW,EAAEc,QADH;AAEVb,kBAAAA,aAAa,EAAEiB,OAAO,CAAC,CAAD,CAFZ;AAGVhB,kBAAAA,aAAa,EAAEgB,OAAO,CAAC,CAAD,CAHZ;AAIVf,kBAAAA,OAAO,EAAEiB;AAJC,iBAAd;AAOIG,gBAAAA,U,GAAa,E;AACTC,gBAAAA,C,GAAE,C;;;sBAAIA,CAAC,GAACJ,C;;;;;8BACZG,U;;uBAAsBT,QAAQ,CAACC,OAAT,CAAiBU,YAAjB,CAA8B,CAA9B,EAAiCR,IAAjC,E;;;;;4BAAXS,I;;;AADIF,gBAAAA,CAAC,E;;;;;AAGpBG,gBAAAA,OAAO,CAACC,GAAR,CAAYL,UAAZ;AACA,qBAAKP,kBAAL;;;;;;;AAEAW,gBAAAA,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB;AACAC,gBAAAA,KAAK,CAAC,gCAAD,CAAL;AACAhC,gBAAAA,MAAM,CAACiC,SAAP,CAAiB,cAAjB;;;;;;;;;;;;;;;;;;6BAuBC;AACP,aACE,iCACE,oBAAC,IAAD,QACE,oBAAC,IAAD,CAAM,GAAN,QACE,oBAAC,IAAD,CAAM,MAAN;AAAa,QAAA,KAAK,EAAE;AAApB,SACG,KAAKC,qBAAL,EADH,CADF,EAIE,oBAAC,MAAD,QACC,KAAKhB,kBAAL,EADD,EAEA,oBAAC,IAAD,CAAM,MAAN;AAAa,QAAA,KAAK,EAAE;AAACiB,UAAAA,SAAS,EAAE;AAAZ;AAApB,QAFA,CAJF,CADF,CADF,CADF;AAiBD;;;;EAnGoBtD,S;;AAuGzB,eAAeoB,UAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { Grid, Step, Button, Checkbox, Form, Header, Icon, Image, Menu, Segment, Sidebar,TextArea, Container, Card } from 'semantic-ui-react';\r\nimport Layout from '../../components/Layout'; \r\nimport web3 from '../../Ethereum/web3';\r\nimport Election from '../../Ethereum/election';\r\nimport Cookies from 'js-cookie';\r\nimport {Router} from '../../routes';\r\nclass VotingList extends Component {\r\n\r\n    state = {\r\n        electiondet: '',\r\n        election_name: '',\r\n        election_desc: '',\r\n        numCand: '',\r\n    };\r\n    GridExampleGrid = () => <Grid>{columns}</Grid>\r\n    SidebarExampleVisible = () => (\r\n  \r\n      <Sidebar.Pushable>\r\n        <Sidebar as={Menu} animation='overlay' icon='labeled' inverted vertical visible width='thin' style={{ backgroundColor: 'white', borderWidth: \"10px\" }}>\r\n        <Menu.Item as='a' style={{ color: 'grey' }} >\r\n        <h2>MENU</h2><hr/>\r\n        </Menu.Item>\r\n          <Menu.Item as='a' style={{ color: 'grey' }} >\r\n            <Icon name='dashboard' />\r\n            Dashboard\r\n          </Menu.Item>\r\n          <Menu.Item as='a' style={{ color: 'grey' }}>\r\n            <Icon name='user outline' />\r\n            Candidate List\r\n          </Menu.Item>\r\n          <Menu.Item as='a' style={{ color: 'grey' }}>\r\n            <Icon name='list' />\r\n            Voter List\r\n          </Menu.Item>\r\n          <Menu.Item as='a' style={{ color: 'grey' }}>\r\n            <Icon name='sign out' />\r\n            Sign Out\r\n          </Menu.Item>\r\n \r\n        </Sidebar>\r\n      </Sidebar.Pushable>\r\n    )\r\n    async componentDidMount() {\r\n        try {\r\n            const add = Cookies.get('address');\r\n            const election = Election(add);\r\n            const summary = await election.methods.getElectionDetails().call();            \r\n            const c = (await election.methods.getNumOfCandidates().call()).toString(1);\r\n            this.setState({\r\n                electiondet: election,\r\n                election_name: summary[0],\r\n                election_desc: summary[1],\r\n                numCand: c\r\n            });\r\n\r\n            let candidates = [];\r\n            for(let i=0 ; i<c; i++) {\r\n                candidates.push(await election.methods.getCandidate(0).call());\r\n            }\r\n            console.log(candidates);\r\n            this.getElectionDetails();\r\n        } catch(err) {\r\n            console.log(err.message);\r\n            alert(\"Redirecting you to login page!\");\r\n            Router.pushRoute('/voter_login');\r\n        }\r\n      }\r\n      getElectionDetails = () => {\r\n        const {\r\n            election_name,\r\n            election_desc\r\n        } = this.state;\r\n    \r\n        return (\r\n          <div style={{marginLeft: '45%',marginBottom: '2%',marginTop: '2%'}}>\r\n            <Header as=\"h2\">\r\n              <Icon name=\"address card\" />\r\n              <Header.Content>\r\n                {election_name}\r\n                <Header.Subheader>{election_desc}</Header.Subheader>\r\n              </Header.Content>\r\n            </Header>\r\n          </div>\r\n        );\r\n      }\r\n  \r\n  \r\n    render() {\r\n      return (\r\n        <div> \r\n          <Grid>\r\n            <Grid.Row>\r\n              <Grid.Column width={2}>\r\n                {this.SidebarExampleVisible()}\r\n              </Grid.Column>\r\n              <Layout>                                   \r\n              {this.getElectionDetails()}\r\n              <Grid.Column style={{minHeight: '77vh'}}>\r\n                       \r\n              </Grid.Column>      \r\n              </Layout>\r\n            </Grid.Row>\r\n          </Grid>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  \r\n\r\nexport default VotingList"]},"metadata":{},"sourceType":"module"}