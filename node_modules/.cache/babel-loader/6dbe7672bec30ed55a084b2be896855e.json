{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _getIterator from \"@babel/runtime-corejs2/core-js/get-iterator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport { Grid, Header, Button, Form, Input, Icon, Menu, Modal, Sidebar, Container, Card } from 'semantic-ui-react';\nimport Layout from '../../components/Layout';\nimport Cookies from 'js-cookie';\nimport { Link, Router } from '../../routes';\nimport Election from '../../Ethereum/election';\nimport { Helmet } from 'react-helmet';\n\nvar VotingList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(VotingList, _Component);\n\n  function VotingList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, VotingList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(VotingList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      election_address: Cookies.get('address'),\n      election_name: '',\n      election_description: '',\n      emailArr: [],\n      idArr: [],\n      item: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateEmail\", function (event) {\n      var d = event.currentTarget.id;\n      var st = 'EmailVal' + event.currentTarget.id;\n      var a = document.getElementById(st).value;\n      var b = _this.state.election_name;\n      var c = _this.state.election_description; //further proceed\n\n      var http = new XMLHttpRequest();\n      var url = '/voter/' + d;\n      var params = 'email=' + a + '&election_name=' + b + '&election_description=' + c;\n      http.open(\"PUT\", url, true); //Send the proper header information along with the request\n\n      http.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n      http.onreadystatechange = function () {\n        //Call a function when the state changes.\n        if (http.readyState == 4 && http.status == 200) {\n          var responseObj = JSON.parse(http.responseText);\n\n          if (responseObj.status == \"success\") {\n            alert(responseObj.message);\n          }\n        }\n      };\n\n      http.send(params);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteEmail\", function (event) {\n      //further proceed\n      var http = new XMLHttpRequest();\n      var url = '/voter/' + event.currentTarget.value;\n      http.open(\"DELETE\", url, true); //Send the proper header information along with the request\n\n      http.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n      http.onreadystatechange = function () {\n        //Call a function when the state changes.\n        if (http.readyState == 4 && http.status == 200) {\n          var responseObj = JSON.parse(http.responseText);\n\n          if (responseObj.status == \"success\") {\n            alert(responseObj.message);\n          }\n        }\n      };\n\n      http.send();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderTable\", function () {\n      return React.createElement(Card.Group, {\n        items: _this.state.item\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"GridExampleGrid\", function () {\n      return React.createElement(Grid, null, columns);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"SidebarExampleVisible\", function () {\n      return React.createElement(Sidebar.Pushable, null, React.createElement(Sidebar, {\n        as: Menu,\n        animation: \"overlay\",\n        icon: \"labeled\",\n        inverted: true,\n        vertical: true,\n        visible: true,\n        width: \"thin\",\n        style: {\n          backgroundColor: 'white',\n          borderWidth: \"10px\"\n        }\n      }, React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(\"h2\", null, \"MENU\"), React.createElement(\"hr\", null)), React.createElement(Link, {\n        route: \"/election/\".concat(Cookies.get('address'), \"/company_dashboard\")\n      }, React.createElement(\"a\", null, React.createElement(Menu.Item, {\n        style: {\n          color: 'grey',\n          fontColor: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"dashboard\"\n      }), \"Dashboard\"))), React.createElement(Link, {\n        route: \"/election/\".concat(Cookies.get('address'), \"/candidate_list\")\n      }, React.createElement(\"a\", null, React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"user outline\"\n      }), \"Candidate List\"))), React.createElement(Link, {\n        route: \"/election/\".concat(Cookies.get('address'), \"/voting_list\")\n      }, React.createElement(\"a\", null, React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"list\"\n      }), \"Voter List\"))), React.createElement(\"hr\", null), React.createElement(Button, {\n        onClick: _this.signOut,\n        style: {\n          backgroundColor: 'white'\n        }\n      }, React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"sign out\"\n      }), \"Sign Out\"))));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"register\", function (event) {\n      var email = document.getElementById('register_voter_email').value;\n      var http = new XMLHttpRequest();\n      var url = \"/voter/register\";\n      var params = \"email=\" + email + \"&election_address=\" + _this.state.election_address + \"&election_name=\" + _this.state.election_name + \"&election_description=\" + _this.state.election_description;\n      http.open(\"POST\", url, true); //Send the proper header information along with the request\n\n      http.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n      http.onreadystatechange = function () {\n        //Call a function when the state changes.\n        if (http.readyState == 4 && http.status == 200) {\n          var responseObj = JSON.parse(http.responseText);\n\n          if (responseObj.status == \"success\") {\n            alert(responseObj.message);\n          } else {\n            alert(responseObj.message);\n          }\n        }\n      };\n\n      http.send(params);\n    });\n\n    return _this;\n  }\n\n  _createClass(VotingList, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var http, url, params, email, id, add, election, summary, ea, ia, i, items;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                http = new XMLHttpRequest();\n                url = '/voter/';\n                params = 'election_address=' + this.state.election_address;\n                http.open(\"POST\", url, true);\n                email = [];\n                id = []; //Send the proper header information along with the request\n\n                http.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n                http.onreadystatechange = function () {\n                  //Call a function when the state changes.\n                  if (http.readyState == 4 && http.status == 200) {\n                    var responseObj = JSON.parse(http.responseText);\n\n                    if (responseObj.status == \"success\") {\n                      var _iteratorNormalCompletion = true;\n                      var _didIteratorError = false;\n                      var _iteratorError = undefined;\n\n                      try {\n                        for (var _iterator = _getIterator(responseObj.data.voters), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                          var voter = _step.value;\n                          email.push(voter.email);\n                          id.push(voter.id);\n                        }\n                      } catch (err) {\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                      } finally {\n                        try {\n                          if (!_iteratorNormalCompletion && _iterator.return != null) {\n                            _iterator.return();\n                          }\n                        } finally {\n                          if (_didIteratorError) {\n                            throw _iteratorError;\n                          }\n                        }\n                      }\n                    }\n                  }\n                };\n\n                http.send(params);\n                this.state.emailArr.push(email);\n                this.state.idArr.push(id);\n                _context.prev = 11;\n                add = Cookies.get('address');\n                election = Election(add);\n                _context.next = 16;\n                return election.methods.getElectionDetails().call();\n\n              case 16:\n                summary = _context.sent;\n                this.setState({\n                  election_name: summary[0],\n                  election_description: summary[1]\n                });\n                _context.next = 25;\n                break;\n\n              case 20:\n                _context.prev = 20;\n                _context.t0 = _context[\"catch\"](11);\n                console.log(_context.t0.message);\n                alert(\"Redirecting you to login page...\");\n                Router.pushRoute('/company_login');\n\n              case 25:\n                ea = [];\n                ea = this.state.emailArr[0];\n                ia = [];\n                ia = this.state.idArr[0];\n                i = -1;\n                items = ia.map(function (ia) {\n                  i++;\n                  return {\n                    header: email[i],\n                    description: React.createElement(\"div\", null, React.createElement(\"br\", null), React.createElement(Modal, {\n                      size: \"tiny\",\n                      trigger: React.createElement(Button, {\n                        basic: true,\n                        id: ia,\n                        color: \"green\"\n                      }, \"Edit\"),\n                      closeIcon: true\n                    }, React.createElement(Modal.Header, null, \"Edit E-mail ID\"), React.createElement(\"center\", null, React.createElement(Modal.Content, null, React.createElement(Input, {\n                      id: \"EmailVal\".concat(ia),\n                      placeholder: \"E-mail ID\",\n                      style: {\n                        marginBottom: '5%',\n                        marginTop: '5%'\n                      }\n                    })), React.createElement(Modal.Actions, null, React.createElement(Button, {\n                      positive: true,\n                      icon: \"checkmark\",\n                      labelPosition: \"right\",\n                      content: \"Yes\",\n                      padding: \"30\",\n                      style: {\n                        marginBottom: \"10px\"\n                      },\n                      onClick: _this2.updateEmail,\n                      id: ia\n                    }), React.createElement(Button, {\n                      negative: true\n                    }, \"No\")))), React.createElement(Button, {\n                      negative: true,\n                      basic: true,\n                      id: ia,\n                      value: ia,\n                      onClick: _this2.deleteEmail\n                    }, \"Delete\"))\n                  };\n                });\n                this.setState({\n                  item: items\n                });\n\n              case 32:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[11, 20]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"signOut\",\n    value: function signOut() {\n      Cookies.remove('address');\n      Cookies.remove('company_email');\n      Cookies.remove('company_id');\n      alert(\"Logging out.\");\n      Router.pushRoute('/homepage');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, React.createElement(Helmet, null, React.createElement(\"title\", null, \"Voting list\"), React.createElement(\"link\", {\n        rel: \"shortcut icon\",\n        type: \"image/x-icon\",\n        href: \"../../static/logo3.png\"\n      })), React.createElement(Grid, null, React.createElement(Grid.Row, null, React.createElement(Grid.Column, {\n        width: 2\n      }, this.SidebarExampleVisible()), React.createElement(Layout, null, React.createElement(\"br\", null), React.createElement(\"br\", null), React.createElement(Grid.Column, {\n        width: 14,\n        style: {\n          minHeight: '630px'\n        }\n      }, React.createElement(Grid.Column, {\n        style: {\n          float: 'left',\n          width: '60%'\n        }\n      }, React.createElement(Header, {\n        as: \"h2\",\n        color: \"black\"\n      }, \"Voter List\"), React.createElement(Container, null, React.createElement(\"table\", null, this.renderTable()))), React.createElement(Grid.Column, {\n        style: {\n          float: 'right',\n          width: '30%'\n        }\n      }, React.createElement(Container, {\n        style: {}\n      }, React.createElement(Header, {\n        as: \"h2\",\n        color: \"black\"\n      }, \"Register Voter\"), React.createElement(Card, {\n        style: {\n          width: '100%'\n        }\n      }, React.createElement(\"br\", null), React.createElement(Form.Group, {\n        size: \"large\",\n        style: {\n          marginLeft: '15%',\n          marginRight: '15%'\n        }\n      }, React.createElement(Form.Input, {\n        style: {\n          marginTop: '10px'\n        },\n        fluid: true,\n        id: \"register_voter_email\",\n        label: \"Email:\",\n        placeholder: \"Enter your email.\",\n        textAlign: \"center\"\n      }), React.createElement(\"br\", null), React.createElement(\"br\", null), React.createElement(Button, {\n        primary: true,\n        style: {\n          Bottom: '10px',\n          marginBottom: '15px'\n        },\n        onClick: this.register\n      }, \"Register\"))))))))));\n    }\n  }]);\n\n  return VotingList;\n}(Component);\n\nexport default VotingList;","map":{"version":3,"sources":["D:\\Blockchain\\BlockChainVoting\\pages\\election\\voting_list.js"],"names":["React","Component","Grid","Header","Button","Form","Input","Icon","Menu","Modal","Sidebar","Container","Card","Layout","Cookies","Link","Router","Election","Helmet","VotingList","election_address","get","election_name","election_description","emailArr","idArr","item","event","d","currentTarget","id","st","a","document","getElementById","value","b","state","c","http","XMLHttpRequest","url","params","open","setRequestHeader","onreadystatechange","readyState","status","responseObj","JSON","parse","responseText","alert","message","send","columns","backgroundColor","borderWidth","color","fontColor","signOut","email","data","voters","voter","push","add","election","methods","getElectionDetails","call","summary","setState","console","log","pushRoute","ea","ia","i","items","map","header","description","marginBottom","marginTop","updateEmail","deleteEmail","remove","SidebarExampleVisible","minHeight","float","width","renderTable","marginLeft","marginRight","Bottom","register"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Grid, Header, Button, Form, Input, Icon, Menu, Modal, Sidebar, Container, Card } from 'semantic-ui-react';\r\nimport Layout from '../../components/Layout';\r\nimport Cookies from 'js-cookie';\r\nimport {Link,Router} from '../../routes';\r\nimport Election from '../../Ethereum/election';\r\nimport {Helmet} from 'react-helmet';\r\nclass VotingList extends Component { \r\n\r\n    state = {\r\n        election_address: Cookies.get('address'),\r\n        election_name: '',\r\n        election_description: '',\r\n        emailArr: [],\r\n        idArr: [],\r\n        item: [],\r\n    }\r\n\r\n    async componentDidMount() {        \r\n        var http = new XMLHttpRequest();\r\n        var url = '/voter/';        \r\n        var params = 'election_address='+this.state.election_address;\r\n        http.open(\"POST\", url, true);\r\n        let email=[];\r\n        let id=[]\r\n        //Send the proper header information along with the request\r\n        http.setRequestHeader(\r\n            \"Content-type\",\r\n            \"application/x-www-form-urlencoded\"\r\n        );\r\n        http.onreadystatechange = function() {\r\n            //Call a function when the state changes.\r\n            if (http.readyState == 4 && http.status == 200) {\r\n                var responseObj = JSON.parse(http.responseText);\r\n                if(responseObj.status==\"success\") {\r\n                  for (let voter of responseObj.data.voters) {\r\n                        email.push(voter.email);\r\n                        id.push(voter.id);    \r\n                  } \r\n                }                \r\n            }\r\n        };\r\n        http.send(params);\r\n        this.state.emailArr.push(email);\r\n        this.state.idArr.push(id);\r\n\r\n        try {\r\n            const add = Cookies.get('address');\r\n            const election = Election(add);\r\n            const summary = await election.methods.getElectionDetails().call();\r\n            this.setState({\r\n                election_name: summary[0],\r\n                election_description: summary[1]\r\n            });\r\n\r\n        } catch(err) {\r\n            console.log(err.message);\r\n            alert(\"Redirecting you to login page...\");\r\n            Router.pushRoute('/company_login');\r\n        }\r\n        let ea = [];\r\n        ea = this.state.emailArr[0];\r\n        let ia = [];\r\n        ia = this.state.idArr[0];            \r\n        \r\n        let i=-1;\r\n        const items = ia.map(ia => {\r\n            i++;\r\n            return {\r\n              header: email[i],\r\n              description: (\r\n                <div>                \r\n                  <br />\r\n                  \r\n                  <Modal size={\"tiny\"} trigger={\r\n                      <Button basic id={ia} color=\"green\">                        \r\n                        Edit\r\n                      </Button>\r\n                    }closeIcon\r\n                  >\r\n                    <Modal.Header>Edit E-mail ID</Modal.Header>\r\n                    <center>\r\n                      <Modal.Content>\r\n                        <Input id={`EmailVal${ia}`} placeholder='E-mail ID' style={{marginBottom: '5%',marginTop: '5%'}}/>\r\n                      </Modal.Content>\r\n                      <Modal.Actions>\r\n                        <Button\r\n                          positive\r\n                          icon=\"checkmark\"\r\n                          labelPosition=\"right\"\r\n                          content=\"Yes\"\r\n                          padding=\"30\"\r\n                          style={{ marginBottom: \"10px\" }}\r\n                          onClick={this.updateEmail}\r\n                          id={ia} \r\n                        />\r\n                        <Button negative>No</Button>\r\n                      </Modal.Actions>\r\n                    </center>\r\n                  </Modal>\r\n                  <Button negative basic id={ia} value={ia} onClick={this.deleteEmail}>Delete</Button>\r\n                </div>\r\n              )\r\n            };\r\n        });\r\n        this.setState({item: items});\r\n    }\r\n\r\n    updateEmail = event => {\r\n        \r\n        const d = event.currentTarget.id;\r\n        const st = 'EmailVal'+event.currentTarget.id;\r\n        const a = document.getElementById(st).value;\r\n        const b = this.state.election_name;\r\n        const c = this.state.election_description;\r\n        //further proceed\r\n\r\n        var http = new XMLHttpRequest();\r\n        var url = '/voter/'+d;  \r\n        var params = 'email='+a+'&election_name='+b+'&election_description='+c;\r\n        http.open(\"PUT\", url, true);\r\n        //Send the proper header information along with the request\r\n        http.setRequestHeader(\r\n            \"Content-type\",\r\n            \"application/x-www-form-urlencoded\"\r\n        );\r\n        http.onreadystatechange = function() {\r\n            //Call a function when the state changes.\r\n            if (http.readyState == 4 && http.status == 200) {\r\n                var responseObj = JSON.parse(http.responseText);\r\n                if(responseObj.status==\"success\") {\r\n                  alert(responseObj.message);\r\n                }\r\n            }\r\n        };\r\n        http.send(params);\r\n    }\r\n\r\n    deleteEmail = event => {\r\n        //further proceed\r\n\r\n        var http = new XMLHttpRequest();\r\n        var url = '/voter/'+event.currentTarget.value;        \r\n        http.open(\"DELETE\", url, true);\r\n        //Send the proper header information along with the request\r\n        http.setRequestHeader(\r\n            \"Content-type\",\r\n            \"application/x-www-form-urlencoded\"\r\n        );\r\n        http.onreadystatechange = function() {\r\n            //Call a function when the state changes.\r\n            if (http.readyState == 4 && http.status == 200) {\r\n                var responseObj = JSON.parse(http.responseText);\r\n                if(responseObj.status==\"success\") {\r\n                  alert(responseObj.message);\r\n                }                \r\n            }\r\n        };\r\n        http.send();\r\n    }\r\n\r\n    renderTable = () => {\r\n        return (<Card.Group items={this.state.item}/>)\r\n    } \r\n\r\n    GridExampleGrid = () => <Grid>{columns}</Grid>\r\n    SidebarExampleVisible = () => (\r\n      <Sidebar.Pushable>\r\n        <Sidebar as={Menu} animation='overlay' icon='labeled' inverted vertical visible width='thin' style={{ backgroundColor: 'white', borderWidth: \"10px\" }}>\r\n        <Menu.Item as='a' style={{ color: 'grey' }} >\r\n        <h2>MENU</h2><hr/>\r\n        </Menu.Item>      \r\n        <Link route={`/election/${Cookies.get('address')}/company_dashboard`}>\r\n        <a>\r\n          <Menu.Item style={{ color: 'grey', fontColor: 'grey' }}>\r\n            <Icon name='dashboard'/>\r\n            Dashboard\r\n          </Menu.Item>\r\n          </a>\r\n          </Link>\r\n          <Link route={`/election/${Cookies.get('address')}/candidate_list`}>\r\n          <a>\r\n          <Menu.Item as='a' style={{ color: 'grey' }}>\r\n            <Icon name='user outline' />\r\n            Candidate List\r\n          </Menu.Item>\r\n          </a>\r\n          </Link>\r\n          <Link route={`/election/${Cookies.get('address')}/voting_list`}>\r\n          <a>\r\n          <Menu.Item as='a' style={{ color: 'grey' }}>\r\n            <Icon name='list' />\r\n            Voter List\r\n          </Menu.Item>\r\n          </a>\r\n          </Link>\r\n          <hr/>\r\n          <Button onClick={this.signOut} style={{backgroundColor: 'white'}}>\r\n          <Menu.Item as='a' style={{ color: 'grey' }}>\r\n            <Icon name='sign out' />\r\n            Sign Out\r\n          </Menu.Item>       \r\n          </Button>  \r\n        </Sidebar>\r\n      </Sidebar.Pushable>\r\n    )\r\n    signOut() {\r\n        Cookies.remove('address');\r\n        Cookies.remove('company_email');\r\n        Cookies.remove('company_id');\r\n        alert(\"Logging out.\");\r\n        Router.pushRoute('/homepage');\r\n    }\r\n\r\n    register = event => {\r\n\r\n\t\tconst email = document.getElementById('register_voter_email').value;\r\n    \r\n\t\tvar http = new XMLHttpRequest();\r\n        var url = \"/voter/register\";\r\n        var params = \"email=\" + email+\"&election_address=\" + this.state.election_address+ \"&election_name=\" + this.state.election_name + \"&election_description=\" + this.state.election_description;\r\n        http.open(\"POST\", url, true);\r\n        //Send the proper header information along with the request\r\n        http.setRequestHeader(\r\n            \"Content-type\",\r\n            \"application/x-www-form-urlencoded\"\r\n        );\r\n        http.onreadystatechange = function() {\r\n            //Call a function when the state changes.\r\n            if (http.readyState == 4 && http.status == 200) {\r\n                var responseObj = JSON.parse(http.responseText);\r\n                if(responseObj.status==\"success\") {\r\n                  alert(responseObj.message);                  \r\n                }\r\n                else {\r\n                  alert(responseObj.message);\r\n                }\r\n            }\r\n        };\r\n    \thttp.send(params);\r\n\t}\r\n\t\r\n  render() {      \r\n    return (\r\n      <div>\r\n          <Helmet>\r\n            <title>Voting list</title>\r\n            <link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"../../static/logo3.png\" />\r\n          </Helmet>\r\n        <Grid>\r\n          <Grid.Row>\r\n            <Grid.Column width={2}>\r\n              {this.SidebarExampleVisible()}\r\n            </Grid.Column>\r\n            <Layout>                      \r\n              <br />\r\n              <br />\r\n              <Grid.Column width={14} style={{ minHeight: '630px' }}>\r\n                <Grid.Column style={{ float: 'left', width: '60%' }}>\r\n                  <Header as='h2' color='black'>\r\n                    Voter List\r\n              </Header>\r\n                  <Container>                      \r\n                      <table>\r\n                      {this.renderTable()}\r\n                      </table>                                        \r\n                  </Container>\r\n                </Grid.Column>\r\n                <Grid.Column style={{ float: 'right', width: '30%' }}>\r\n                  <Container style={{}}>\r\n                    <Header as='h2' color='black'>\r\n                      Register Voter\r\n                       </Header>\r\n                    <Card style={{ width: '100%' }}>\r\n                      <br/>\r\n                      <Form.Group size='large' style={{ marginLeft: '15%', marginRight: '15%' }} >\r\n                        <Form.Input\r\n\t\t\t\t\t\tstyle={{marginTop: '10px'}}\r\n                          fluid\r\n                          id='register_voter_email'\r\n                          label='Email:'\r\n                          placeholder='Enter your email.'\r\n                          textAlign='center'\r\n                        />\r\n\r\n                        <br /><br />\r\n                        <Button primary style={{ Bottom: '10px', marginBottom: '15px' }} onClick={this.register}>Register</Button>\r\n                      </Form.Group>\r\n                    </Card>\r\n                  </Container>\r\n                </Grid.Column>                \r\n              </Grid.Column>\r\n            </Layout>\r\n          </Grid.Row>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default VotingList"]},"metadata":{},"sourceType":"module"}