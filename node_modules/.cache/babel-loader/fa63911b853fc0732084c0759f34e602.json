{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from \"react\";\nimport { Button, Form, Grid, Header, Segment, Icon, Message } from \"semantic-ui-react\";\nimport web3 from \"../../Ethereum/web3\";\nimport Election_Factory from \"../../Ethereum/election_factory\";\nimport { Router } from \"../../routes\";\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginForm, _Component);\n\n  function LoginForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LoginForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      //retrieve the company's email via cookie\n      election_name: \"\",\n      election_description: \"\",\n      loading: false,\n      message: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"signin\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var accounts, bool, summary;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.setState({\n                  loading: true,\n                  message: true\n                });\n\n                _context.prev = 1;\n                console.log(_this.state.election_name);\n                console.log(_this.state.election_description);\n                _context.next = 6;\n                return web3.eth.getAccounts();\n\n              case 6:\n                accounts = _context.sent;\n                console.log(accounts[0]);\n                _context.next = 10;\n                return Election_Factory.methods.createElection(\"xyz\", _this.state.election_name, _this.state.election_description).send({\n                  from: accounts[0]\n                });\n\n              case 10:\n                bool = _context.sent;\n\n                if (!bool) {\n                  _context.next = 18;\n                  break;\n                }\n\n                _context.next = 14;\n                return Election_Factory.methods.getDeployedElection(\"xyz\").call();\n\n              case 14:\n                summary = _context.sent;\n                console.log(summary[0]);\n\n                _this.setState({\n                  loading: false,\n                  message: false\n                });\n\n                Router.pushRoute(\"/election/\".concat(summary[0], \"/company_dashboard\"));\n\n              case 18:\n                _context.next = 23;\n                break;\n\n              case 20:\n                _context.prev = 20;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0.Message);\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 20]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"LoginForm\", function () {\n      return React.createElement(\"div\", {\n        className: \"login-form\"\n      }, React.createElement(\"style\", {\n        JSX: true\n      }, \"\\n                .login-form {\\n                    width:100%;\\n                    height:100%;\\n                    position:absolute;\\n                    background: url('../../static/blockchain.jpg') no-repeat;\\n                } \\n              \"), React.createElement(Grid, {\n        textAlign: \"center\",\n        style: {\n          height: \"100%\"\n        },\n        verticalAlign: \"middle\"\n      }, React.createElement(Grid.Column, {\n        style: {\n          maxWidth: 380\n        }\n      }, React.createElement(Form, {\n        size: \"large\"\n      }, React.createElement(Segment, null, React.createElement(Header, {\n        as: \"h2\",\n        color: \"black\",\n        textAlign: \"center\",\n        style: {\n          marginTop: 10\n        }\n      }, \"Create an election!\"), React.createElement(Form.Input, {\n        fluid: true,\n        iconPosition: \"left\",\n        icon: \"address card outline\",\n        placeholder: \"Election Name\",\n        style: {\n          padding: 5\n        },\n        value: _this.state.election_name,\n        onChange: function onChange(event) {\n          return _this.setState({\n            election_name: event.target.value\n          });\n        },\n        required: true\n      }), React.createElement(Form.Input, {\n        as: \"TextArea\",\n        required: true,\n        style: {\n          maxHeight: \"30px\",\n          maxWidth: \"96%\",\n          marginBottom: \"10px\"\n        },\n        fluid: true,\n        placeholder: \"Election Description\",\n        value: _this.state.election_description,\n        onChange: function onChange(event) {\n          return _this.setState({\n            election_description: event.target.value\n          });\n        }\n      }), React.createElement(Button, {\n        color: \"blue\",\n        fluid: true,\n        size: \"large\",\n        style: {\n          marginBottom: 15\n        },\n        onClick: _this.signin,\n        loading: _this.state.loading\n      }, \"Submit\"), React.createElement(Message, {\n        info: true\n      }, React.createElement(Icon, {\n        name: \"circle notched\",\n        loading: true\n      }), React.createElement(Message.Content, null, \"Do note that the election creation will take time(around 2-3 mins), since it its deployed on the Main network.\")))))));\n    });\n\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        href: \"//cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css\"\n      }), this.LoginForm());\n    }\n  }]);\n\n  return LoginForm;\n}(Component);\n\nexport default LoginForm;","map":{"version":3,"sources":["D:\\Blockchain\\BlockChainVoting\\pages\\election\\create_election.js"],"names":["React","Component","Button","Form","Grid","Header","Segment","Icon","Message","web3","Election_Factory","Router","LoginForm","election_name","election_description","loading","message","event","setState","console","log","state","eth","getAccounts","accounts","methods","createElection","send","from","bool","getDeployedElection","call","summary","pushRoute","height","maxWidth","marginTop","padding","target","value","maxHeight","marginBottom","signin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Button, Form, Grid, Header, Segment, Icon, Message } from \"semantic-ui-react\";\r\nimport web3 from \"../../Ethereum/web3\";\r\nimport Election_Factory from \"../../Ethereum/election_factory\";\r\nimport { Router } from \"../../routes\";\r\nclass LoginForm extends Component {\r\n  state = {\r\n    //retrieve the company's email via cookie\r\n    election_name: \"\",\r\n    election_description: \"\",\r\n    loading: false,\r\n    message: false\r\n  };\r\n\r\n  signin = async event => {\r\n      this.setState({loading: true, message: true});\r\n    try {\r\n      console.log(this.state.election_name);\r\n      console.log(this.state.election_description);\r\n      const accounts = await web3.eth.getAccounts();\r\n      console.log(accounts[0]);\r\n      const bool = await Election_Factory.methods\r\n        .createElection(\r\n          \"xyz\",\r\n          this.state.election_name,\r\n          this.state.election_description\r\n        )\r\n        .send({ from: accounts[0] });\r\n\r\n    if(bool) {\r\n        const summary = await Election_Factory.methods\r\n          .getDeployedElection(\"xyz\")\r\n          .call();\r\n        console.log(summary[0]);\r\n        this.setState({loading: false, message: false});\r\n        Router.pushRoute(`/election/${summary[0]}/company_dashboard`);\r\n    }\r\n    } catch (err) {\r\n      console.log(err.Message);\r\n    }\r\n  };\r\n\r\n  LoginForm = () => (\r\n    <div className=\"login-form\">\r\n      <style JSX>{`\r\n                .login-form {\r\n                    width:100%;\r\n                    height:100%;\r\n                    position:absolute;\r\n                    background: url('../../static/blockchain.jpg') no-repeat;\r\n                } \r\n              `}</style>\r\n\r\n      <Grid\r\n        textAlign=\"center\"\r\n        style={{ height: \"100%\" }}\r\n        verticalAlign=\"middle\"\r\n      >\r\n        <Grid.Column style={{ maxWidth: 380 }}>\r\n          <Form size=\"large\">\r\n            <Segment>\r\n              <Header\r\n                as=\"h2\"\r\n                color=\"black\"\r\n                textAlign=\"center\"\r\n                style={{ marginTop: 10 }}\r\n              >\r\n                Create an election!\r\n              </Header>\r\n              <Form.Input\r\n                fluid\r\n                iconPosition=\"left\"\r\n                icon=\"address card outline\"\r\n                placeholder=\"Election Name\"\r\n                style={{ padding: 5 }}\r\n                value={this.state.election_name}\r\n                onChange={event =>\r\n                  this.setState({ election_name: event.target.value })\r\n                }\r\n                required={true}\r\n              />\r\n              <Form.Input\r\n                as=\"TextArea\"\r\n                required={true}\r\n                style={{\r\n                  maxHeight: \"30px\",\r\n                  maxWidth: \"96%\",\r\n                  marginBottom: \"10px\"\r\n                }}\r\n                fluid\r\n                placeholder=\"Election Description\"\r\n                value={this.state.election_description}\r\n                onChange={event =>\r\n                  this.setState({ election_description: event.target.value })\r\n                }\r\n              />\r\n\r\n              <Button\r\n                color=\"blue\"\r\n                fluid\r\n                size=\"large\"\r\n                style={{ marginBottom: 15 }}\r\n                onClick={this.signin}\r\n                loading={this.state.loading}\r\n              >\r\n                Submit\r\n              </Button>\r\n              <Message info>\r\n                    <Icon name=\"circle notched\" loading />\r\n                    <Message.Content>                          \r\n                      Do note that the election creation will take time(around 2-3 mins), since it its deployed on the Main network.\r\n                    </Message.Content>\r\n              </Message>\r\n            </Segment>\r\n          </Form>\r\n        </Grid.Column>\r\n      </Grid>\r\n    </div>\r\n  );\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <link\r\n          rel=\"stylesheet\"\r\n          href=\"//cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css\"\r\n        />\r\n        {/* <link href=\"../css/paper-dashboard.css?v=2.0.0\" rel=\"stylesheet\" /> */}\r\n        {this.LoginForm()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;\r\n"]},"metadata":{},"sourceType":"module"}