{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { Component } from 'react';\nimport { Grid, Step, Icon, Menu, Sidebar, Container, Modal, Card, Header, Button, Item } from 'semantic-ui-react';\nimport Layout from '../../components/Layout';\nimport { Bar } from 'react-chartjs-2';\nimport 'chartjs-plugin-annotation';\nimport Election from '../../Ethereum/election';\nimport Cookies from 'js-cookie';\nimport web3 from '../../Ethereum/web3';\nimport { Link, Router } from '../../routes';\nimport { Helmet } from 'react-helmet';\nvar b = 0;\nvar cand = [];\nvar graphEmail = [];\nvar graphVotes = [];\nvar options = {\n  maintainAspectRatio: true,\n  responsive: true,\n  scales: {\n    yAxes: [{\n      height: '500px',\n      stacked: true,\n      gridLines: {\n        display: true,\n        color: \"rgba(255,99,132,0.2)\"\n      }\n    }],\n    xAxes: [{\n      width: '500px',\n      gridLines: {\n        display: false\n      }\n    }]\n  }\n};\nvar data = {\n  labels: graphEmail,\n  datasets: [{\n    label: \"Vote Counts\",\n    backgroundColor: \"rgba(255,99,132,0.2)\",\n    borderColor: \"rgba(255,99,132,1)\",\n    borderWidth: 2,\n    hoverBackgroundColor: \"rgba(255,99,132,0.4)\",\n    hoverBorderColor: \"rgba(255,99,132,1)\",\n    data: graphVotes\n  }]\n};\n\nvar ContainerExampleContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ContainerExampleContainer, _Component);\n\n  function ContainerExampleContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ContainerExampleContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ContainerExampleContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      election_address: Cookies.get('address'),\n      election_name: '',\n      election_desc: '',\n      voters: 0,\n      candidates: 0,\n      visible: false,\n      loading: false,\n      b: 0\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getElectionDetails\", function () {\n      var _this$state = _this.state,\n          election_name = _this$state.election_name,\n          election_desc = _this$state.election_desc;\n      return React.createElement(\"div\", {\n        style: {\n          marginLeft: '43%',\n          marginBottom: '2%',\n          marginTop: '2%',\n          float: 'left'\n        }\n      }, React.createElement(Header, {\n        as: \"h2\"\n      }, React.createElement(Icon, {\n        name: \"address card\"\n      }), React.createElement(Header.Content, null, election_name, React.createElement(Header.Subheader, null, election_desc))));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"CardExampleGroupProps\", function () {\n      return React.createElement(Card.Group, null);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"GridExampleGrid\", function () {\n      return React.createElement(Grid, null, columns);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"SidebarExampleVisible\", function () {\n      return React.createElement(Sidebar.Pushable, null, React.createElement(Sidebar, {\n        as: Menu,\n        animation: \"overlay\",\n        icon: \"labeled\",\n        inverted: true,\n        vertical: true,\n        visible: true,\n        width: \"thin\",\n        style: {\n          backgroundColor: 'white',\n          borderWidth: \"10px\"\n        }\n      }, React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(\"h2\", null, \"MENU\"), React.createElement(\"hr\", null)), React.createElement(Link, {\n        route: \"/election/\".concat(Cookies.get('address'), \"/company_dashboard\")\n      }, React.createElement(\"a\", null, React.createElement(Menu.Item, {\n        style: {\n          color: 'grey',\n          fontColor: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"dashboard\"\n      }), \"Dashboard\"))), React.createElement(Link, {\n        route: \"/election/\".concat(Cookies.get('address'), \"/candidate_list\")\n      }, React.createElement(\"a\", null, React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"user outline\"\n      }), \"Candidate List\"))), React.createElement(Link, {\n        route: \"/election/\".concat(Cookies.get('address'), \"/voting_list\")\n      }, React.createElement(\"a\", null, React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"list\"\n      }), \"Voter List\"))), React.createElement(\"hr\", null), React.createElement(Button, {\n        onClick: _this.signOut,\n        style: {\n          backgroundColor: 'white'\n        }\n      }, React.createElement(Menu.Item, {\n        as: \"a\",\n        style: {\n          color: 'grey'\n        }\n      }, React.createElement(Icon, {\n        name: \"sign out\"\n      }), \"Sign Out\"))));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"endElection\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var candidate, add, election, http, url, params;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                candidate = 0;\n                _context.prev = 1;\n\n                _this.setState({\n                  loading: true\n                });\n\n                add = Cookies.get('address');\n                election = Election(add);\n                _context.next = 7;\n                return election.methods.winnerCandidate().call();\n\n              case 7:\n                candidate = _context.sent;\n                _context.next = 10;\n                return election.methods.getCandidate(candidate).call();\n\n              case 10:\n                cand = _context.sent;\n                console.log(cand);\n                http = new XMLHttpRequest();\n                url = \"/voter/resultMail\";\n                params = 'election_address=' + Cookies.get('address') + '&election_name=' + _this.state.election_name + '&candidate_email=' + cand[4] + '&winner_candidate=' + cand[0];\n                http.open(\"POST\", url, true); //Send the proper header information along with the request\n\n                http.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n                http.onreadystatechange = function () {\n                  //Call a function when the state changes.\n                  if (http.readyState == 4 && http.status == 200) {\n                    var responseObj = JSON.parse(http.responseText);\n\n                    if (responseObj.status == \"success\") {\n                      alert(\"Mail sent!\");\n                    } else {\n                      alert(responseObj.message);\n                    }\n                  }\n                };\n\n                _this.returnModal();\n\n                _this.setState({\n                  loading: true\n                });\n\n                http.send(params);\n                _context.next = 26;\n                break;\n\n              case 23:\n                _context.prev = 23;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0.message);\n\n              case 26:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 23]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"returnModal\", function (event) {\n      console.log(\"In returnModal\");\n      return React.createElement(\"h1\", null, \"I won the election\");\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"returnGraph\", function () {\n      return React.createElement(Bar, {\n        data: data,\n        width: 120,\n        height: 50,\n        options: options\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(ContainerExampleContainer, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var http, url, params, add, election, summary, v, c, candidates, i, a;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                http = new XMLHttpRequest();\n                url = '/voter/';\n                params = 'election_address=' + Cookies.get('address');\n                http.open(\"POST\", url, true); //Send the proper header information along with the request\n\n                http.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n                http.onreadystatechange = function () {\n                  //Call a function when the state changes.\n                  if (http.readyState == 4 && http.status == 200) {\n                    var responseObj = JSON.parse(http.responseText);\n\n                    if (responseObj.status == \"success\") {\n                      console.log(responseObj.count);\n                      b = responseObj.count;\n                    }\n                  }\n                };\n\n                http.send(params);\n                _context2.prev = 7;\n                add = Cookies.get('address');\n                election = Election(add);\n                _context2.next = 12;\n                return election.methods.getElectionDetails().call();\n\n              case 12:\n                summary = _context2.sent;\n                _context2.next = 15;\n                return election.methods.getNumOfVoters().call();\n\n              case 15:\n                v = _context2.sent;\n                this.setState({\n                  voters: v\n                });\n                _context2.next = 19;\n                return election.methods.getNumOfCandidates().call();\n\n              case 19:\n                c = _context2.sent;\n                this.setState({\n                  candidates: c\n                });\n                this.setState({\n                  election_name: summary[0],\n                  election_desc: summary[1]\n                });\n                candidates = [];\n                i = 0;\n\n              case 24:\n                if (!(i < c)) {\n                  _context2.next = 33;\n                  break;\n                }\n\n                _context2.t0 = candidates;\n                _context2.next = 28;\n                return election.methods.getCandidate(i).call();\n\n              case 28:\n                _context2.t1 = _context2.sent;\n\n                _context2.t0.push.call(_context2.t0, _context2.t1);\n\n              case 30:\n                i++;\n                _context2.next = 24;\n                break;\n\n              case 33:\n                graphEmail = candidates.map(function (candidate) {\n                  return candidate[0];\n                });\n                graphVotes = candidates.map(function (candidate) {\n                  return candidate[3];\n                });\n                graphVotes.sort();\n                a = graphVotes.length;\n                console.log(a);\n                console.log(graphEmail);\n                console.log(graphVotes[a - 1]);\n                _context2.next = 47;\n                break;\n\n              case 42:\n                _context2.prev = 42;\n                _context2.t2 = _context2[\"catch\"](7);\n                console.log(_context2.t2.message);\n                alert(\"Redirecting you to login page...\");\n                Router.pushRoute('/company_login');\n\n              case 47:\n                this.setState({\n                  b: b\n                });\n\n              case 48:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[7, 42]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"signOut\",\n    value: function signOut() {\n      console.log(\"In signout.\");\n      Cookies.remove('address');\n      Cookies.remove('company_email');\n      Cookies.remove('company_id');\n      alert(\"Logging out.\");\n      Router.pushRoute('/homepage');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, React.createElement(Helmet, null, React.createElement(\"title\", null, \"Dashboard\"), React.createElement(\"link\", {\n        rel: \"shortcut icon\",\n        type: \"image/x-icon\",\n        href: \"../../static/logo3.png\"\n      })), React.createElement(Grid, null, React.createElement(Grid.Row, null, React.createElement(Grid.Column, {\n        width: 2\n      }, this.SidebarExampleVisible()), React.createElement(Layout, null, React.createElement(Grid.Column, {\n        width: 16\n      }, this.getElectionDetails(), React.createElement(Button, {\n        negative: true,\n        style: {\n          float: 'right',\n          marginTop: '2%'\n        },\n        onClick: this.endElection,\n        loading: this.state.loading\n      }, \"End election\"), React.createElement(Step.Group, {\n        style: {\n          minWidth: 1130,\n          minHeight: 90\n        }\n      }, React.createElement(Step, {\n        icon: \"users\",\n        title: \"Voters\",\n        description: this.state.b\n      }), React.createElement(Step, {\n        icon: \"user outline\",\n        title: \"Candidates\",\n        description: this.state.candidates\n      }), React.createElement(Step, {\n        icon: \"chart bar outline\",\n        title: \"Total Votes\",\n        description: this.state.voters\n      })), this.CardExampleGroupProps(), React.createElement(Grid.Column, {\n        visible: this.state.visible\n      }, React.createElement(\"br\", null), React.createElement(\"div\", {\n        className: \"jsx-4150802546\" + \" \" + \"he\"\n      }, React.createElement(_JSXStyle, {\n        id: \"4150802546\"\n      }, \".he.jsx-4150802546{height:50%;max-width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxCbG9ja2NoYWluXFxCbG9ja0NoYWluVm90aW5nXFxwYWdlc1xcZWxlY3Rpb25cXGNvbXBhbnlfZGFzaGJvYXJkLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXFROEIsQUFHa0MsV0FDSSxlQUNqQiIsImZpbGUiOiJEOlxcQmxvY2tjaGFpblxcQmxvY2tDaGFpblZvdGluZ1xccGFnZXNcXGVsZWN0aW9uXFxjb21wYW55X2Rhc2hib2FyZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEdyaWQsIFN0ZXAsIEljb24sIE1lbnUsIFNpZGViYXIsIENvbnRhaW5lcixNb2RhbCwgQ2FyZCwgSGVhZGVyLCBCdXR0b24sIEl0ZW0gfSBmcm9tICdzZW1hbnRpYy11aS1yZWFjdCc7XHJcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9MYXlvdXQnO1xyXG5pbXBvcnQgeyBCYXIgfSBmcm9tICdyZWFjdC1jaGFydGpzLTInO1xyXG5pbXBvcnQgJ2NoYXJ0anMtcGx1Z2luLWFubm90YXRpb24nO1xyXG5pbXBvcnQgRWxlY3Rpb24gZnJvbSAnLi4vLi4vRXRoZXJldW0vZWxlY3Rpb24nO1xyXG5pbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnO1xyXG5pbXBvcnQgd2ViMyBmcm9tICcuLi8uLi9FdGhlcmV1bS93ZWIzJztcclxuaW1wb3J0IHtMaW5rLFJvdXRlcn0gZnJvbSAnLi4vLi4vcm91dGVzJztcclxuaW1wb3J0IHtIZWxtZXR9IGZyb20gJ3JlYWN0LWhlbG1ldCc7XHJcblxyXG52YXIgYj0wO1xyXG5sZXQgY2FuZD1bXTtcclxubGV0IGdyYXBoRW1haWwgPSBbXTtcclxubGV0IGdyYXBoVm90ZXMgPSBbXTtcclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuICBtYWludGFpbkFzcGVjdFJhdGlvOiB0cnVlLFxyXG4gIHJlc3BvbnNpdmU6IHRydWUsXHJcbiAgc2NhbGVzOiB7XHJcbiAgICB5QXhlczogW3tcclxuICAgICAgaGVpZ2h0OiAnNTAwcHgnLFxyXG4gICAgICBzdGFja2VkOiB0cnVlLFxyXG4gICAgICBncmlkTGluZXM6IHtcclxuICAgICAgICBkaXNwbGF5OiB0cnVlLFxyXG4gICAgICAgIGNvbG9yOiBcInJnYmEoMjU1LDk5LDEzMiwwLjIpXCJcclxuICAgICAgfVxyXG4gICAgfV0sXHJcbiAgICB4QXhlczogW3tcclxuICAgICAgd2lkdGg6ICc1MDBweCcsXHJcbiAgICAgIGdyaWRMaW5lczoge1xyXG4gICAgICAgIGRpc3BsYXk6IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1dXHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgZGF0YSA9IHtcclxuICBsYWJlbHM6IGdyYXBoRW1haWwsXHJcbiAgZGF0YXNldHM6IFt7XHJcbiAgICBsYWJlbDogXCJWb3RlIENvdW50c1wiLFxyXG4gICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMjU1LDk5LDEzMiwwLjIpXCIsXHJcbiAgICBib3JkZXJDb2xvcjogXCJyZ2JhKDI1NSw5OSwxMzIsMSlcIixcclxuICAgIGJvcmRlcldpZHRoOiAyLFxyXG4gICAgaG92ZXJCYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNTUsOTksMTMyLDAuNClcIixcclxuICAgIGhvdmVyQm9yZGVyQ29sb3I6IFwicmdiYSgyNTUsOTksMTMyLDEpXCIsXHJcbiAgICBkYXRhOiBncmFwaFZvdGVzLFxyXG4gIH1dXHJcbn07XHJcblxyXG5jbGFzcyBDb250YWluZXJFeGFtcGxlQ29udGFpbmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuXHJcbiAgICBzdGF0ZSA9IHtcclxuICAgICAgICBlbGVjdGlvbl9hZGRyZXNzOiBDb29raWVzLmdldCgnYWRkcmVzcycpLFxyXG4gICAgICAgIGVsZWN0aW9uX25hbWU6ICcnLFxyXG4gICAgICAgIGVsZWN0aW9uX2Rlc2M6ICcnLFxyXG4gICAgICAgIHZvdGVyczogMCxcclxuICAgICAgICBjYW5kaWRhdGVzOiAwLFxyXG4gICAgICAgIHZpc2libGU6IGZhbHNlLFxyXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGI6IDBcclxuICAgIH07XHJcbiAgICBhc3luYyBjb21wb25lbnREaWRNb3VudCgpIHsgIFxyXG4gICAgdmFyIGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHZhciB1cmwgPSAnL3ZvdGVyLyc7XHJcbiAgICB2YXIgcGFyYW1zID0gJ2VsZWN0aW9uX2FkZHJlc3M9JytDb29raWVzLmdldCgnYWRkcmVzcycpOyAgICBcclxuICAgIGh0dHAub3BlbihcIlBPU1RcIiwgdXJsLCB0cnVlKTtcclxuICAgIC8vU2VuZCB0aGUgcHJvcGVyIGhlYWRlciBpbmZvcm1hdGlvbiBhbG9uZyB3aXRoIHRoZSByZXF1ZXN0XHJcbiAgICBodHRwLnNldFJlcXVlc3RIZWFkZXIoXHJcbiAgICAgICAgXCJDb250ZW50LXR5cGVcIixcclxuICAgICAgICBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXHJcbiAgICApO1xyXG4gICAgaHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvL0NhbGwgYSBmdW5jdGlvbiB3aGVuIHRoZSBzdGF0ZSBjaGFuZ2VzLlxyXG4gICAgICAgIGlmIChodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiBodHRwLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgdmFyIHJlc3BvbnNlT2JqID0gSlNPTi5wYXJzZShodHRwLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIGlmKHJlc3BvbnNlT2JqLnN0YXR1cz09XCJzdWNjZXNzXCIpIHtcclxuICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2VPYmouY291bnQpO1xyXG4gICAgICAgICAgICAgICBiID0gcmVzcG9uc2VPYmouY291bnQ7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICB9O1xyXG4gICAgaHR0cC5zZW5kKHBhcmFtcyk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGFkZCA9IENvb2tpZXMuZ2V0KCdhZGRyZXNzJyk7XHJcbiAgICAgIGNvbnN0IGVsZWN0aW9uID0gRWxlY3Rpb24oYWRkKTtcclxuICAgICAgY29uc3Qgc3VtbWFyeSA9IGF3YWl0IGVsZWN0aW9uLm1ldGhvZHMuZ2V0RWxlY3Rpb25EZXRhaWxzKCkuY2FsbCgpO1xyXG4gICAgICBjb25zdCB2ID0gKGF3YWl0IGVsZWN0aW9uLm1ldGhvZHMuZ2V0TnVtT2ZWb3RlcnMoKS5jYWxsKCkpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHt2b3RlcnM6IHZ9KTsgICAgICBcclxuICAgICAgY29uc3QgYyA9IChhd2FpdCBlbGVjdGlvbi5tZXRob2RzLmdldE51bU9mQ2FuZGlkYXRlcygpLmNhbGwoKSk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2NhbmRpZGF0ZXM6IGN9KVxyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBlbGVjdGlvbl9uYW1lOiBzdW1tYXJ5WzBdLFxyXG4gICAgICAgIGVsZWN0aW9uX2Rlc2M6IHN1bW1hcnlbMV1cclxuICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgbGV0IGNhbmRpZGF0ZXMgPSBbXTtcclxuICAgIGZvcihsZXQgaT0wIDsgaTxjOyBpKyspIFxyXG4gICAgICAgIGNhbmRpZGF0ZXMucHVzaChhd2FpdCBlbGVjdGlvbi5tZXRob2RzLmdldENhbmRpZGF0ZShpKS5jYWxsKCkpO1xyXG5cclxuICAgIGdyYXBoRW1haWwgPSBjYW5kaWRhdGVzLm1hcChjYW5kaWRhdGUgPT4geyByZXR1cm4gY2FuZGlkYXRlWzBdIH0pO1xyXG4gICAgZ3JhcGhWb3RlcyA9IGNhbmRpZGF0ZXMubWFwKGNhbmRpZGF0ZSA9PiB7IHJldHVybiBjYW5kaWRhdGVbM10gfSk7XHJcblxyXG4gICAgZ3JhcGhWb3Rlcy5zb3J0KCk7XHJcbiAgICBjb25zdCBhID0gZ3JhcGhWb3Rlcy5sZW5ndGg7XHJcbiAgICBjb25zb2xlLmxvZyhhKTsgIFxyXG4gICAgY29uc29sZS5sb2coZ3JhcGhFbWFpbCk7XHJcbiAgICBjb25zb2xlLmxvZyhncmFwaFZvdGVzW2EtMV0pO1xyXG4gICAgICAgICAgICBcclxuICAgIH1jYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIGFsZXJ0KFwiUmVkaXJlY3RpbmcgeW91IHRvIGxvZ2luIHBhZ2UuLi5cIik7XHJcbiAgICAgICAgUm91dGVyLnB1c2hSb3V0ZSgnL2NvbXBhbnlfbG9naW4nKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoe2I6IGJ9KTsgXHJcbiAgfSAgXHJcblxyXG4gIGdldEVsZWN0aW9uRGV0YWlscyA9ICgpID0+IHtcclxuICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgZWxlY3Rpb25fbmFtZSxcclxuICAgICAgICAgIGVsZWN0aW9uX2Rlc2NcclxuICAgICAgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5MZWZ0OiAnNDMlJyxtYXJnaW5Cb3R0b206ICcyJScsbWFyZ2luVG9wOiAnMiUnLGZsb2F0OidsZWZ0J319PlxyXG4gICAgICAgICAgPEhlYWRlciBhcz1cImgyXCI+XHJcbiAgICAgICAgICAgIDxJY29uIG5hbWU9XCJhZGRyZXNzIGNhcmRcIiAvPlxyXG4gICAgICAgICAgICA8SGVhZGVyLkNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAge2VsZWN0aW9uX25hbWV9XHJcbiAgICAgICAgICAgICAgPEhlYWRlci5TdWJoZWFkZXI+e2VsZWN0aW9uX2Rlc2N9PC9IZWFkZXIuU3ViaGVhZGVyPlxyXG4gICAgICAgICAgICA8L0hlYWRlci5Db250ZW50PlxyXG4gICAgICAgICAgPC9IZWFkZXI+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICk7XHJcbiAgfVxyXG4gIENhcmRFeGFtcGxlR3JvdXBQcm9wcyA9ICgpID0+ICg8Q2FyZC5Hcm91cD48L0NhcmQuR3JvdXA+KVxyXG4gIEdyaWRFeGFtcGxlR3JpZCA9ICgpID0+IDxHcmlkPntjb2x1bW5zfTwvR3JpZD5cclxuICBTaWRlYmFyRXhhbXBsZVZpc2libGUgPSAoKSA9PiAoXHJcbiAgICA8U2lkZWJhci5QdXNoYWJsZT5cclxuICAgICAgPFNpZGViYXIgYXM9e01lbnV9IGFuaW1hdGlvbj0nb3ZlcmxheScgaWNvbj0nbGFiZWxlZCcgaW52ZXJ0ZWQgdmVydGljYWwgdmlzaWJsZSB3aWR0aD0ndGhpbicgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnLCBib3JkZXJXaWR0aDogXCIxMHB4XCIgfX0+XHJcbiAgICAgIDxNZW51Lkl0ZW0gYXM9J2EnIHN0eWxlPXt7IGNvbG9yOiAnZ3JleScgfX0gPlxyXG4gICAgICA8aDI+TUVOVTwvaDI+PGhyLz5cclxuICAgICAgPC9NZW51Lkl0ZW0+ICAgICAgXHJcbiAgICAgIDxMaW5rIHJvdXRlPXtgL2VsZWN0aW9uLyR7Q29va2llcy5nZXQoJ2FkZHJlc3MnKX0vY29tcGFueV9kYXNoYm9hcmRgfT5cclxuICAgICAgPGE+XHJcbiAgICAgICAgPE1lbnUuSXRlbSBzdHlsZT17eyBjb2xvcjogJ2dyZXknLCBmb250Q29sb3I6ICdncmV5JyB9fT5cclxuICAgICAgICAgIDxJY29uIG5hbWU9J2Rhc2hib2FyZCcvPlxyXG4gICAgICAgICAgRGFzaGJvYXJkXHJcbiAgICAgICAgPC9NZW51Lkl0ZW0+XHJcbiAgICAgICAgPC9hPlxyXG4gICAgICAgIDwvTGluaz5cclxuICAgICAgICA8TGluayByb3V0ZT17YC9lbGVjdGlvbi8ke0Nvb2tpZXMuZ2V0KCdhZGRyZXNzJyl9L2NhbmRpZGF0ZV9saXN0YH0+XHJcbiAgICAgICAgPGE+XHJcbiAgICAgICAgPE1lbnUuSXRlbSBhcz0nYScgc3R5bGU9e3sgY29sb3I6ICdncmV5JyB9fT5cclxuICAgICAgICAgIDxJY29uIG5hbWU9J3VzZXIgb3V0bGluZScgLz5cclxuICAgICAgICAgIENhbmRpZGF0ZSBMaXN0XHJcbiAgICAgICAgPC9NZW51Lkl0ZW0+XHJcbiAgICAgICAgPC9hPlxyXG4gICAgICAgIDwvTGluaz5cclxuICAgICAgICA8TGluayByb3V0ZT17YC9lbGVjdGlvbi8ke0Nvb2tpZXMuZ2V0KCdhZGRyZXNzJyl9L3ZvdGluZ19saXN0YH0+XHJcbiAgICAgICAgPGE+XHJcbiAgICAgICAgPE1lbnUuSXRlbSBhcz0nYScgc3R5bGU9e3sgY29sb3I6ICdncmV5JyB9fT5cclxuICAgICAgICAgIDxJY29uIG5hbWU9J2xpc3QnIC8+XHJcbiAgICAgICAgICBWb3RlciBMaXN0XHJcbiAgICAgICAgPC9NZW51Lkl0ZW0+XHJcbiAgICAgICAgPC9hPlxyXG4gICAgICAgIDwvTGluaz5cclxuICAgICAgICA8aHIvPlxyXG4gICAgICAgIDxCdXR0b24gb25DbGljaz17dGhpcy5zaWduT3V0fSBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogJ3doaXRlJ319PlxyXG4gICAgICAgIDxNZW51Lkl0ZW0gYXM9J2EnIHN0eWxlPXt7IGNvbG9yOiAnZ3JleScgfX0+XHJcbiAgICAgICAgICA8SWNvbiBuYW1lPSdzaWduIG91dCcgLz5cclxuICAgICAgICAgIFNpZ24gT3V0XHJcbiAgICAgICAgPC9NZW51Lkl0ZW0+ICAgICAgIFxyXG4gICAgICAgIDwvQnV0dG9uPiAgXHJcbiAgICAgIDwvU2lkZWJhcj5cclxuICAgIDwvU2lkZWJhci5QdXNoYWJsZT5cclxuICApXHJcbiAgc2lnbk91dCgpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJJbiBzaWdub3V0LlwiKTtcclxuICAgICAgQ29va2llcy5yZW1vdmUoJ2FkZHJlc3MnKTtcclxuICAgICAgQ29va2llcy5yZW1vdmUoJ2NvbXBhbnlfZW1haWwnKTtcclxuICAgICAgQ29va2llcy5yZW1vdmUoJ2NvbXBhbnlfaWQnKTtcclxuICAgICAgYWxlcnQoXCJMb2dnaW5nIG91dC5cIik7XHJcbiAgICAgIFJvdXRlci5wdXNoUm91dGUoJy9ob21lcGFnZScpO1xyXG4gIH1cclxuICBlbmRFbGVjdGlvbiA9IGFzeW5jIGV2ZW50ID0+IHtcclxuICAgICAgbGV0IGNhbmRpZGF0ZSA9IDA7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2xvYWRpbmc6IHRydWV9KTsgICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGFkZCA9IENvb2tpZXMuZ2V0KCdhZGRyZXNzJyk7XHJcbiAgICAgICAgY29uc3QgZWxlY3Rpb24gPSBFbGVjdGlvbihhZGQpO1xyXG4gICAgICAgIGNhbmRpZGF0ZSA9IGF3YWl0IGVsZWN0aW9uLm1ldGhvZHMud2lubmVyQ2FuZGlkYXRlKCkuY2FsbCgpO1xyXG4gICAgICAgIGNhbmQgPSBhd2FpdCBlbGVjdGlvbi5tZXRob2RzLmdldENhbmRpZGF0ZShjYW5kaWRhdGUpLmNhbGwoKTsgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKGNhbmQpO1xyXG4gICAgICAgIHZhciBodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgdmFyIHVybCA9IFwiL3ZvdGVyL3Jlc3VsdE1haWxcIjtcclxuICAgICAgICB2YXIgcGFyYW1zID0gJ2VsZWN0aW9uX2FkZHJlc3M9JytDb29raWVzLmdldCgnYWRkcmVzcycpKycmZWxlY3Rpb25fbmFtZT0nK3RoaXMuc3RhdGUuZWxlY3Rpb25fbmFtZSsnJmNhbmRpZGF0ZV9lbWFpbD0nK2NhbmRbNF0rJyZ3aW5uZXJfY2FuZGlkYXRlPScrY2FuZFswXTtcclxuICAgICAgICBodHRwLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgLy9TZW5kIHRoZSBwcm9wZXIgaGVhZGVyIGluZm9ybWF0aW9uIGFsb25nIHdpdGggdGhlIHJlcXVlc3RcclxuICAgICAgICBodHRwLnNldFJlcXVlc3RIZWFkZXIoXHJcbiAgICAgICAgXCJDb250ZW50LXR5cGVcIixcclxuICAgICAgICBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vQ2FsbCBhIGZ1bmN0aW9uIHdoZW4gdGhlIHN0YXRlIGNoYW5nZXMuXHJcbiAgICAgICAgaWYgKGh0dHAucmVhZHlTdGF0ZSA9PSA0ICYmIGh0dHAuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzcG9uc2VPYmogPSBKU09OLnBhcnNlKGh0dHAucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgaWYocmVzcG9uc2VPYmouc3RhdHVzPT1cInN1Y2Nlc3NcIikge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJNYWlsIHNlbnQhXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhbGVydChyZXNwb25zZU9iai5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9ICBcclxuICAgIH07XHJcbiAgICB7dGhpcy5yZXR1cm5Nb2RhbCgpfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7bG9hZGluZzogdHJ1ZX0pOyBcclxuICAgIGh0dHAuc2VuZChwYXJhbXMpOyAgXHJcbiAgICBcclxuICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgICByZXR1cm5Nb2RhbCA9IGV2ZW50ID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkluIHJldHVybk1vZGFsXCIpO1xyXG4gICAgICAgIHJldHVybihcclxuICAgICAgICAgICAgPGgxPkkgd29uIHRoZSBlbGVjdGlvbjwvaDE+KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm5HcmFwaCA9ICgpID0+IHsgXHJcbiAgICAgIHJldHVybiAoPEJhciBkYXRhPXtkYXRhfSB3aWR0aD17MTIwfSBoZWlnaHQ9ezUwfSBvcHRpb25zPXtvcHRpb25zfS8+KTsgXHJcbiAgICB9XHJcbiAgICBcclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gKCAgXHJcbiAgICAgIDxkaXY+ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgPEhlbG1ldD5cclxuICAgICAgICAgICAgPHRpdGxlPkRhc2hib2FyZDwvdGl0bGU+XHJcbiAgICAgICAgICAgIDxsaW5rIHJlbD1cInNob3J0Y3V0IGljb25cIiB0eXBlPVwiaW1hZ2UveC1pY29uXCIgaHJlZj1cIi4uLy4uL3N0YXRpYy9sb2dvMy5wbmdcIiAvPlxyXG4gICAgICAgICAgPC9IZWxtZXQ+XHJcbiAgICAgICAgPEdyaWQ+XHJcbiAgICAgICAgICA8R3JpZC5Sb3c+XHJcbiAgICAgICAgICAgIDxHcmlkLkNvbHVtbiB3aWR0aD17Mn0+XHJcbiAgICAgICAgICAgICAge3RoaXMuU2lkZWJhckV4YW1wbGVWaXNpYmxlKCl9XHJcbiAgICAgICAgICAgIDwvR3JpZC5Db2x1bW4+XHJcblxyXG4gICAgICAgICAgICA8TGF5b3V0PiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPEdyaWQuQ29sdW1uIHdpZHRoPXsxNn0+XHJcbiAgICAgICAgICAgICAge3RoaXMuZ2V0RWxlY3Rpb25EZXRhaWxzKCl9ICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgPEJ1dHRvbiBuZWdhdGl2ZSBzdHlsZT17e2Zsb2F0OiAncmlnaHQnLG1hcmdpblRvcDogJzIlJ319IG9uQ2xpY2s9e3RoaXMuZW5kRWxlY3Rpb259IGxvYWRpbmc9e3RoaXMuc3RhdGUubG9hZGluZ30+RW5kIGVsZWN0aW9uPC9CdXR0b24+XHJcbiAgICAgICAgICAgICAgICAgPFN0ZXAuR3JvdXAgc3R5bGU9e3sgbWluV2lkdGg6IDExMzAsIG1pbkhlaWdodDogOTAsIH19PlxyXG4gICAgICAgICAgICAgICAgICA8U3RlcCBpY29uPSd1c2VycycgdGl0bGU9J1ZvdGVycycgZGVzY3JpcHRpb249e3RoaXMuc3RhdGUuYn0gLz5cclxuICAgICAgICAgICAgICAgICAgPFN0ZXAgaWNvbj0ndXNlciBvdXRsaW5lJyB0aXRsZT0nQ2FuZGlkYXRlcycgZGVzY3JpcHRpb249e3RoaXMuc3RhdGUuY2FuZGlkYXRlc30vPlxyXG4gICAgICAgICAgICAgICAgICA8U3RlcCBpY29uPSdjaGFydCBiYXIgb3V0bGluZScgdGl0bGU9J1RvdGFsIFZvdGVzJyBkZXNjcmlwdGlvbj17dGhpcy5zdGF0ZS52b3RlcnN9IC8+XHJcbiAgICAgICAgICAgICAgICA8L1N0ZXAuR3JvdXA+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5DYXJkRXhhbXBsZUdyb3VwUHJvcHMoKX1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgPEdyaWQuQ29sdW1uIHZpc2libGU9e3RoaXMuc3RhdGUudmlzaWJsZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJyLz5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZVwiPlxyXG4gICAgICAgICAgICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAgICAgICAgICAgLmhlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTAlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgYH08L3N0eWxlPlxyXG4gICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3RoaXMucmV0dXJuR3JhcGh9PkNsaWNrIHRvIGdldCB0aGUgc3RhdGlzdGljcyE8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+IFxyXG4gICAgICAgICAgICAgICAgPC9HcmlkLkNvbHVtbj4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPC9HcmlkLkNvbHVtbj4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICA8L0xheW91dD5cclxuICAgICAgICAgIDwvR3JpZC5Sb3c+XHJcbiAgICAgICAgPC9HcmlkPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDb250YWluZXJFeGFtcGxlQ29udGFpbmVyOyJdfQ== */\\n/*@ sourceURL=D:\\\\Blockchain\\\\BlockChainVoting\\\\pages\\\\election\\\\company_dashboard.js */\"), React.createElement(Button, {\n        onClick: this.returnGraph\n      }, \"Click to get the statistics!\"))))))));\n    }\n  }]);\n\n  return ContainerExampleContainer;\n}(Component);\n\nexport default ContainerExampleContainer;","map":{"version":3,"sources":["D:\\Blockchain\\BlockChainVoting\\pages\\election\\company_dashboard.js"],"names":["React","Component","Grid","Step","Icon","Menu","Sidebar","Container","Modal","Card","Header","Button","Item","Layout","Bar","Election","Cookies","web3","Link","Router","Helmet","b","cand","graphEmail","graphVotes","options","maintainAspectRatio","responsive","scales","yAxes","height","stacked","gridLines","display","color","xAxes","width","data","labels","datasets","label","backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","ContainerExampleContainer","election_address","get","election_name","election_desc","voters","candidates","visible","loading","state","marginLeft","marginBottom","marginTop","float","columns","fontColor","signOut","event","candidate","setState","add","election","methods","winnerCandidate","call","getCandidate","console","log","http","XMLHttpRequest","url","params","open","setRequestHeader","onreadystatechange","readyState","status","responseObj","JSON","parse","responseText","alert","message","returnModal","send","count","getElectionDetails","summary","getNumOfVoters","v","getNumOfCandidates","c","i","push","map","sort","a","length","pushRoute","remove","SidebarExampleVisible","endElection","minWidth","minHeight","CardExampleGroupProps","returnGraph"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Grid, Step, Icon, Menu, Sidebar, Container,Modal, Card, Header, Button, Item } from 'semantic-ui-react';\r\nimport Layout from '../../components/Layout';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport 'chartjs-plugin-annotation';\r\nimport Election from '../../Ethereum/election';\r\nimport Cookies from 'js-cookie';\r\nimport web3 from '../../Ethereum/web3';\r\nimport {Link,Router} from '../../routes';\r\nimport {Helmet} from 'react-helmet';\r\n\r\nvar b=0;\r\nlet cand=[];\r\nlet graphEmail = [];\r\nlet graphVotes = [];\r\nconst options = {\r\n  maintainAspectRatio: true,\r\n  responsive: true,\r\n  scales: {\r\n    yAxes: [{\r\n      height: '500px',\r\n      stacked: true,\r\n      gridLines: {\r\n        display: true,\r\n        color: \"rgba(255,99,132,0.2)\"\r\n      }\r\n    }],\r\n    xAxes: [{\r\n      width: '500px',\r\n      gridLines: {\r\n        display: false\r\n      }\r\n    }]\r\n  }\r\n};\r\n\r\nconst data = {\r\n  labels: graphEmail,\r\n  datasets: [{\r\n    label: \"Vote Counts\",\r\n    backgroundColor: \"rgba(255,99,132,0.2)\",\r\n    borderColor: \"rgba(255,99,132,1)\",\r\n    borderWidth: 2,\r\n    hoverBackgroundColor: \"rgba(255,99,132,0.4)\",\r\n    hoverBorderColor: \"rgba(255,99,132,1)\",\r\n    data: graphVotes,\r\n  }]\r\n};\r\n\r\nclass ContainerExampleContainer extends Component {\r\n\r\n    state = {\r\n        election_address: Cookies.get('address'),\r\n        election_name: '',\r\n        election_desc: '',\r\n        voters: 0,\r\n        candidates: 0,\r\n        visible: false,\r\n        loading: false,\r\n        b: 0\r\n    };\r\n    async componentDidMount() {  \r\n    var http = new XMLHttpRequest();\r\n    var url = '/voter/';\r\n    var params = 'election_address='+Cookies.get('address');    \r\n    http.open(\"POST\", url, true);\r\n    //Send the proper header information along with the request\r\n    http.setRequestHeader(\r\n        \"Content-type\",\r\n        \"application/x-www-form-urlencoded\"\r\n    );\r\n    http.onreadystatechange = function() {\r\n        //Call a function when the state changes.\r\n        if (http.readyState == 4 && http.status == 200) {\r\n            var responseObj = JSON.parse(http.responseText);\r\n            if(responseObj.status==\"success\") {\r\n               console.log(responseObj.count);\r\n               b = responseObj.count;\r\n            }                \r\n        }        \r\n    };\r\n    http.send(params);\r\n      try {\r\n      const add = Cookies.get('address');\r\n      const election = Election(add);\r\n      const summary = await election.methods.getElectionDetails().call();\r\n      const v = (await election.methods.getNumOfVoters().call());\r\n      this.setState({voters: v});      \r\n      const c = (await election.methods.getNumOfCandidates().call());\r\n      this.setState({candidates: c})\r\n      this.setState({\r\n        election_name: summary[0],\r\n        election_desc: summary[1]\r\n      });\r\n            \r\n    let candidates = [];\r\n    for(let i=0 ; i<c; i++) \r\n        candidates.push(await election.methods.getCandidate(i).call());\r\n\r\n    graphEmail = candidates.map(candidate => { return candidate[0] });\r\n    graphVotes = candidates.map(candidate => { return candidate[3] });\r\n\r\n    graphVotes.sort();\r\n    const a = graphVotes.length;\r\n    console.log(a);  \r\n    console.log(graphEmail);\r\n    console.log(graphVotes[a-1]);\r\n            \r\n    }catch (err) {\r\n        console.log(err.message);\r\n        alert(\"Redirecting you to login page...\");\r\n        Router.pushRoute('/company_login');\r\n    }\r\n    this.setState({b: b}); \r\n  }  \r\n\r\n  getElectionDetails = () => {\r\n      const {\r\n          election_name,\r\n          election_desc\r\n      } = this.state;\r\n      \r\n      return (\r\n        <div style={{marginLeft: '43%',marginBottom: '2%',marginTop: '2%',float:'left'}}>\r\n          <Header as=\"h2\">\r\n            <Icon name=\"address card\" />\r\n            <Header.Content>\r\n              {election_name}\r\n              <Header.Subheader>{election_desc}</Header.Subheader>\r\n            </Header.Content>\r\n          </Header>\r\n        </div>\r\n      );\r\n  }\r\n  CardExampleGroupProps = () => (<Card.Group></Card.Group>)\r\n  GridExampleGrid = () => <Grid>{columns}</Grid>\r\n  SidebarExampleVisible = () => (\r\n    <Sidebar.Pushable>\r\n      <Sidebar as={Menu} animation='overlay' icon='labeled' inverted vertical visible width='thin' style={{ backgroundColor: 'white', borderWidth: \"10px\" }}>\r\n      <Menu.Item as='a' style={{ color: 'grey' }} >\r\n      <h2>MENU</h2><hr/>\r\n      </Menu.Item>      \r\n      <Link route={`/election/${Cookies.get('address')}/company_dashboard`}>\r\n      <a>\r\n        <Menu.Item style={{ color: 'grey', fontColor: 'grey' }}>\r\n          <Icon name='dashboard'/>\r\n          Dashboard\r\n        </Menu.Item>\r\n        </a>\r\n        </Link>\r\n        <Link route={`/election/${Cookies.get('address')}/candidate_list`}>\r\n        <a>\r\n        <Menu.Item as='a' style={{ color: 'grey' }}>\r\n          <Icon name='user outline' />\r\n          Candidate List\r\n        </Menu.Item>\r\n        </a>\r\n        </Link>\r\n        <Link route={`/election/${Cookies.get('address')}/voting_list`}>\r\n        <a>\r\n        <Menu.Item as='a' style={{ color: 'grey' }}>\r\n          <Icon name='list' />\r\n          Voter List\r\n        </Menu.Item>\r\n        </a>\r\n        </Link>\r\n        <hr/>\r\n        <Button onClick={this.signOut} style={{backgroundColor: 'white'}}>\r\n        <Menu.Item as='a' style={{ color: 'grey' }}>\r\n          <Icon name='sign out' />\r\n          Sign Out\r\n        </Menu.Item>       \r\n        </Button>  \r\n      </Sidebar>\r\n    </Sidebar.Pushable>\r\n  )\r\n  signOut() {\r\n      console.log(\"In signout.\");\r\n      Cookies.remove('address');\r\n      Cookies.remove('company_email');\r\n      Cookies.remove('company_id');\r\n      alert(\"Logging out.\");\r\n      Router.pushRoute('/homepage');\r\n  }\r\n  endElection = async event => {\r\n      let candidate = 0;\r\n    try {\r\n        this.setState({loading: true});        \r\n        const add = Cookies.get('address');\r\n        const election = Election(add);\r\n        candidate = await election.methods.winnerCandidate().call();\r\n        cand = await election.methods.getCandidate(candidate).call();     \r\n        console.log(cand);\r\n        var http = new XMLHttpRequest();\r\n        var url = \"/voter/resultMail\";\r\n        var params = 'election_address='+Cookies.get('address')+'&election_name='+this.state.election_name+'&candidate_email='+cand[4]+'&winner_candidate='+cand[0];\r\n        http.open(\"POST\", url, true);\r\n        //Send the proper header information along with the request\r\n        http.setRequestHeader(\r\n        \"Content-type\",\r\n        \"application/x-www-form-urlencoded\"\r\n        );\r\n        http.onreadystatechange = function() {\r\n        //Call a function when the state changes.\r\n        if (http.readyState == 4 && http.status == 200) {\r\n            var responseObj = JSON.parse(http.responseText);\r\n            if(responseObj.status==\"success\") {\r\n                alert(\"Mail sent!\");\r\n            }\r\n            else {\r\n            alert(responseObj.message);\r\n            }\r\n            \r\n        }  \r\n    };\r\n    {this.returnModal()}\r\n    this.setState({loading: true}); \r\n    http.send(params);  \r\n    \r\n    } catch(err) {\r\n        console.log(err.message);\r\n    }\r\n  }\r\n\r\n    returnModal = event => {\r\n        console.log(\"In returnModal\");\r\n        return(\r\n            <h1>I won the election</h1>);\r\n    }\r\n\r\n    returnGraph = () => { \r\n      return (<Bar data={data} width={120} height={50} options={options}/>); \r\n    }\r\n    \r\n  render() {\r\n    return (  \r\n      <div>                \r\n          <Helmet>\r\n            <title>Dashboard</title>\r\n            <link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"../../static/logo3.png\" />\r\n          </Helmet>\r\n        <Grid>\r\n          <Grid.Row>\r\n            <Grid.Column width={2}>\r\n              {this.SidebarExampleVisible()}\r\n            </Grid.Column>\r\n\r\n            <Layout>              \r\n              <Grid.Column width={16}>\r\n              {this.getElectionDetails()}           \r\n               <Button negative style={{float: 'right',marginTop: '2%'}} onClick={this.endElection} loading={this.state.loading}>End election</Button>\r\n                 <Step.Group style={{ minWidth: 1130, minHeight: 90, }}>\r\n                  <Step icon='users' title='Voters' description={this.state.b} />\r\n                  <Step icon='user outline' title='Candidates' description={this.state.candidates}/>\r\n                  <Step icon='chart bar outline' title='Total Votes' description={this.state.voters} />\r\n                </Step.Group>\r\n                {this.CardExampleGroupProps()}\r\n                \r\n                <Grid.Column visible={this.state.visible}>\r\n                    <br/>\r\n                  <div className=\"he\">\r\n                  <style jsx>{`\r\n                    .he {\r\n                      height: 50%;\r\n                      max-width: 100%;\r\n                    }\r\n                  `}</style>\r\n                  <Button onClick={this.returnGraph}>Click to get the statistics!</Button>\r\n                  </div> \r\n                </Grid.Column>                \r\n              </Grid.Column>            \r\n              </Layout>\r\n          </Grid.Row>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ContainerExampleContainer;"]},"metadata":{},"sourceType":"module"}